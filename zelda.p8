pico-8 cartridge // http://www.pico-8.com
version 39
__lua__
-->8
-- special functions
  -- code modified from class rain.p8
  function _init() 
    player = {
      --player coordinates
      x = 10,
      y = 10,
      --offset for sprite from top left
      ox=0, 
      oy=0,
      --sprite dimensions
      w = 15,
      h = 15,
      orientation = 0
    -- orientation is 0,2,4,6 for
    -- left, right, up, down
    }

    -- initailize spikes and gems
    spikes = {}
    spikeCount = 0
    plantSpikes(70,70)
    plantSpikes(90,90)
    gems = {}
    gemCount = 0
    plantGem(30,30)
    plantGem(50,50)

    -- variables for movement
    speed = 40 -- pixels/sec
    dx, dy = 0, 0
    dt = 0
    lastframe = t()
  end

  function _draw()
    cls()
    map()
    spr(player.orientation, player.x, player.y, 2, 2)
    drawSpikes()
    drawGem()
    print("for debugging", 0, 120, 12)
  end

  function _update60()
    dt = t() - lastframe
    lastframe = t()
  
    input() 
    updateSpikes()
  end





-->8
--code for player movement
  function input()
    local dx, dy = 0,0
    if(btn(0)) then --left
      dx = -speed * dt
      player.orientation = 0
    elseif (btn(1)) then --right
      dx = speed * dt
      player.orientation = 2
    elseif (btn(2)) then --up
      dy = -speed * dt
      player.orientation = 4
    elseif (btn(3)) then --down
      dy= speed * dt
      player.orientation = 6
    end

    if hit(player.x+dx,player.y,player.w,player.h) then
      dx = 0
    end
    if hit(player.x,player.y+dy,player.w,player.h) then
      dy = 0
    end

    player.x += dx
    player.y += dy
  end
  --code for wall collisions
  --Checks for collisions on all sides of the sprite
  function hit(x,y,w,h)
    collide=false
    for i=x,x+w do
      --Check both the top and the bottom 
      if (fget(mget(i/8,y/8))>0) or
          (fget(mget(i/8,(y+h)/8))>0) then
            collide=true
      end
    end
    
    for i=y,y+h do
      --Check both the left and the right 
      if (fget(mget(x/8,i/8))>0) or
          (fget(mget((x+w)/8,i/8))>0) then
            collide=true
      end
    end
    
    return collide
  end
-->8
--code for gems
  function drawGem()
  for i=1,#gems do
    spr(20, gems[i].x, gems[i].y)
  end
  end

  function plantGem(x,y)
    local seed = {
      x=x,
      y=x,
      frame=0
    }
    gemCount += 1
    gems[gemCount] = seed
  end

  function updateGem()
  -- TODO
  --  for i=1,#gems do
  --   local stage = flr(t() % 4)
  --    spikes[i].frame = stage
  --  end
  end
-->8
--code for spikes
  function drawSpikes()
  for i=1,#spikes do
    spr(spikes[i].frame, spikes[i].x, spikes[i].y)
  end
  end

  function plantSpikes(x,y)
    local seed = {
      x=x,
      y=x,
      frame=0
    }
    spikeCount += 1
    spikes[spikeCount] = seed
  end

  function updateSpikes()
  for i=1,#spikes do
    local stage = flr(t() % 4)
    spikes[i].frame = stage
  end
  end

__gfx__
000000004aaaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999990
000000004999999a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009944444444444499
007007004999949a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009442222222222449
000770004949999a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009422111111112249
000770004999499a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009421100000011249
007007004999994a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009421000000001249
000000004999999a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009421022002201249
00000000444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009421028008201249
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009421000000001249
00007780000088700000888000008880000088800000000000000000000000000000000000000000000000000000000000000000000000009421000000001249
0077888000887780008888700088888000888880003b77000037bb00003bbb00003bbb00003bbb00000000000000000000000000000000009421000000001249
088888200877882008888720088888200888882003b3bb7003b377b00373bbb003b3bbb003b3bbb0000000000000000000000000000000009421100000011249
088882000778820008877200088872000888820003bbb3b003bbb37003b7b3b0037bb3b003bbb3b0000000000000000000000000000000009422111111112249
0888220008882200087722000887220008882200033bbbb0033bbbb0033b77b00337bbb0033bbbb0000000000000000000000000000000009442222222222449
02222000022220000222200002222000022220000033330000333300003333000033330000333300000000000000000000000000000000009944444444444499
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999990
99999999999999999999994444999999444444444444444454444444444444450000000000000000555555555555555555555555555555555555555555555555
999999999444499999999449999999994449999499999444444999999999944400000000000000004dddddddddddddd54dddddddddddddd54ddd6ddddddd6dd5
9999999999995499499999999999a59944499aaa9999994444999aaaaaa9994400000000000000004dddddddddddddd54dddddddddddddd54ddd6ddddddd6dd5
9999999999999999944999999aaaa9994449aaaaaaaaa9444499aa7777aa994400000000000000004d0000dddd0000d54d0060dddd0060d54d0660dddd0660d5
999aa999999999999944999aaaa999994449aa7777aaa9444499aa7777aa994400000000000000004d0000dddd0000d54d0050dddd0050d54d0666dddd0660d5
999954444999999999999aaa999999994499a77777777a94449aa777777aa94400000000000000004d0000dddd0000d54d0550dddd0550d54d6666dd6d6666d5
999999444444449999999999999999994999a77777777a94449aa777777aa94400000000000000004dddddddddddddd54dddddddddddddd54ddddddd6dddddd5
999999994444444449999999999449994999777777777a94449aa777777aa94400000000000000004ddddd0000ddddd54ddddd0060ddddd54ddddd0660ddddd5
9aaaa9999999999944449999444499994999777777777794449aa777777aa94400000000000000004ddddd0000ddddd54ddddd0050ddddd54ddddd0660ddddd5
aaaaaaaaaaa999999944444444499999449a777777777794449aa777777aa94400000000000000004ddddd0000ddddd54ddddd0550ddddd54ddd6d6666dd6dd5
9999955aaa99999999999554444499994497777777777794449aa777777aa94400000000000000004dddddddddddddd54dddddddddddddd54ddd6ddddddd6dd5
99999999999aaa4999999999aa4444444497777777777a94449aa777777aa94400000000000000004d0000dddd0000d54d0060dddd0060d54d0660dddd0660d5
4999999994444aa999999999aaa99994449777777777a994449aa777777aa94400000000000000004d0000dddd0000d54d0050dddd0050d54d0666dddd0666d5
44999994444499994a44499999aaa999449977777777a994449aaaaaaaaaa94400000000000000004d0000dddd0000d54d0550dddd0550d54d6666dddd6666d5
944444444499999999954499999995994449977777779944449999999999994400000000000000004dddddddddddddd54dddddddddddddd54dddddddddddddd5
4994449999999999999999999999999944499977777a994454444444444444450000000000000000444444444444444444444444444444444444444444444444
99999999999999994444554444554444499999994999999949999999499999990000000000000000445000000000014900000000000001494450000000000000
99999999944449994aaa9aaa4aaaaa99444444444444444444444444444444440000000000000000941000000000054900000000000005499410000000000000
999999999999549949aa999949aaaaaa115115511155111111511551115511110000000000000000945000000000514900000000000051499450000000000000
99999999999999995999999949999999500005050000550550000505000055050000000000000000941500000000014900000000000001499415000000000000
999aa999999999999444544449445444000000000000000000000000000000000000000000000000941500000000554900000000000055499415000000000000
9999544449999999aa9a5aaaaaaa5aaa000000000000000000000000000000000000000000000000941500000000514900000000000051499415000000000000
9999994444444499aaa94aaa99994aaa000000000000000000000000000000000000000000000000941000000000014900000000000001499410000000000000
99999999444444449999499999994999000000000000000000000000000000000000000000000000941000000000014400000000000001449410000000000000
9aaaa999999999994444944454944494000000000000000000000000000000000000000000000000441500000000054900000000000005494415000000000000
aaaaaaaaaaa99999499aaaaa499aaaaa000000000000000000000000000000000000000000000000945000000000514900000000000051499450000000000000
9999955aaa9999994aaaaa994aaaaa99000000000000000000000000000000000000000000000000941000000000014900000000000001499410000000000000
99999999999aaa495999999959999999000000000000000000000000000000000000000000000000941000000000054900000000000005499410000000000000
4999999994444aa99444544994445499005005000000550000000000000000000050050000005500941000000000554900000000000055499410000000000000
4499999444449999aaaa4aaaaaaa4aaa111551115511511500000000000000001115511155115115945000000000514900000000000051499450000000000000
9444444444999999a9994aaaa999499a444444444444444400000000000000004444444444444444945000000000014900000000000001499450000000000000
49944499999999999999499999995999499999994999999900000000000000004999999949999999941500000000014400000000000001449415000000000000
49999999499999994999999949999994445000000000000000000000000001494999999949999994445000000000014949999999499999994999999949999994
94444444444444444444444444444449941000000000000000000000000005499444444444444449941000000000054994444444444444444444444444444449
94511551115511111151155111551149945000000000000000000000000051499451155111551149945000000000514994511551115511111151155111551149
94100505000055055000050500000149941500000000000000000000000001499410050500000149941500000000014994100505000055055000050500000149
94150000000000000000000000005549941500000000000000000000000055499415000000005549941500000000554994150000000000000000000000005549
94150000000000000000000000005149941500000000000000000000000051499415000000005149941500000000514994150000000000000000000000005149
94100000000000000000000000000149941000000000000000000000000001499410000000000149941000000000014994100000000000000000000000000149
94100000000000000000000000000144941000000000000000000000000001449410000000000144941000000000014494100000000000000000000000000144
44150000000000000000000000000549441500000000000000000000000005494415000000000549441500000000054944150000000000000000000000000549
94500000000000000000000000005149945000000000000000000000000051499450000000005149945000000000514994500000000000000000000000005149
94100000000000000000000000000149941000000000000000000000000001499410000000000149941000000000014994100000000000000000000000000149
94100000000000000000000000000549945000000000000000000000000005499410000000000549945000000000054994500000000000000000000000000549
94100000000000000000000000005549945005000000550000500500000005499410000000005549945005000000054994500500000055000050050000000549
94500000000000000000000000005149941551115511511511155111551051499450000000005149941551115510514994155111551151151115511155105149
94500000000000000000000000000149944444444444444444444444444444499450000000000149944444444444444994444444444444444444444444444449
94150000000000000000000000000144499999994999999949999999499999949415000000000144499999994999999449999999499999994999999949999994
55555555555555555555555555555555555555555555555555555558555555555555585555555555555555555555555555555555555555550000000000000000
4dddddddddddddd54dddddddddddddd54dddddddddddddd54dddddd88dddddd548ddd8ddd8dd8dd54dddddddddddddd54dddddddddddddd50000000000000000
4dddddd00dddddd54dddddd00dddddd54dddddd00dddddd54dd8ddd88d8dddd548dd88ddd8ddd8d54dddddd00dddddd54dddddd00dddddd50000000000000000
4dddddd00dddddd54dddddd00dddddd54dddddd00dddddd548d8dd888d88d8d588dd888d88ddd8d54dddddd00dddddd54dddddd00dddddd50000000000000000
4dddddd00dddddd54dddd8d00dddddd54dddddd00dddddd588dddd898888d8d58dd888888888ddd54dddd8d00dddddd54dddddd00dddddd50000000000000000
4ddddd0000ddddd54ddddd0008ddddd54ddddd0000ddddd588dd888998988d854dd888899888ddd54ddddd0008ddddd54ddddd0000ddddd50000000000000000
4dddd000000dddd54dddd000000dddd54dddd000000dddd548dd889999988dd54ddd889999888dd54dddd000000dddd54dddd000000dddd50000000000000000
4ddd00000000ddd54ddd00808000ddd54ddd00000000ddd548d88999999988d54dd8899999988dd54ddd00808000ddd54ddd00000000ddd50000000000000000
4ddd00000000ddd54ddd00008000ddd54ddd00000000ddd54dd88999999988d54d88899999988dd54ddd00008000ddd54ddd00000000ddd50000000000000000
4dddd000000dddd54dddd088880dddd54dddd000000dddd54dd8899aa9998dd54d88899a99988dd54dddd088880dddd54dddd000000dddd50000000000000000
4ddddd0000ddddd54ddddd0880ddddd54ddddd0000ddddd54dd8899aaa998dd54dd8899aa9988dd84ddddd0880ddddd54ddddd0000ddddd50000000000000000
4dddddd00dddddd54dddddd00dddddd54dddddd00dddddd548dd89aaaa998dd58dd889aaa9988dd84dddddd00dddddd54dddddd00dddddd50000000000000000
4dddddd00dddddd54dddddd00dddddd54dddddd00dddddd548dd88aaaa88dd858dd889aaaa88dd854dddddd00dddddd54dddddd00dddddd50000000000000000
4dddddd00dddddd54dddddd00dddddd54dddddd00dddddd54d8dd88aa88dd88548dd88aaa88dddd54dddddd00dddddd54dddddd00dddddd50000000000000000
4dddddddddddddd54dddddddddddddd54dddddddddddddd54d8dddddddddd8d54dddddddddddddd54dddddddddddddd54dddddddddddddd50000000000000000
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000004540000000000000454000000000000045400000000000004540000000000000045000000000000004500000000000000450000000000000045000000
00000454545400000000045454540000000004545454000000000454545400000000004544440000000000454444000000000045444400000000004544440000
00000044444000000000004444400000000000444440000000000044444000000000000444400000000000044440000000000004444000000000000444400000
00000006f600000000000006f600000000000006f600000000000006f60000000000000af60000000000000af60000000000000af60000000000000af6000000
0000000fff0000000000000fff0000000000000fff0000000000000fff0000000000000aff0000000000000aff0000000000000aff0000000000000aff000000
00000054745000000000005474500000000000547450000000000054745000000000000547000000000000054700000000000005470000000000000547000000
00000044744000000000004474400000000000447440000000000044744000000000000547000000000000054700000000000005470000000000000547000000
00000044644000000000004464400000000000446440000000000044644000000000000446000000000000044600000000000004460000000000000446000000
00000044644000000000004464400000000000446440000000000044644000000000000446000000000000044600000000000004460000000000000446000000
000000f4a4f00000000000f4a4f00000000000f4a4f00000000000f4a4f000000000000f460000000000000f460000000000000f460000000000000f46000000
00000001110000000000000111000000000000011100000000000001110000000000000011000000000000001100000000000000110000000000000011000000
00000001010000000000000101000000000000010100000000000001010000000000000011000000000000001100000000000000110000000000000011000000
00000001010000000000000101000000000000010100000000000001010000000000000011000000000000001100000000000000110000000000000011000000
00000001010000000000000107000000000000010100000000000007010000000000000011000000000000010100000000000006100000000000000101000000
00000007070000000000000700000000000000070700000000000000070000000000000076000000000000070600000000000000700000000000000706000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000004540000000000000454000000000000045400000000000004540000000000000000000000000000000000000000000000000000000000000000000000
00000454545400000000045454540000000004545454000000000454545400000000000000000000000000000000000000000000000000000000000000000000
00000044444000000000004444400000000000444440000000000044444000000000000000000000000000000000000000000000000000000000000000000000
0000000aaa0000000000000aaa0000000000000aaa0000000000000aaa0000000000000000000000000000000000000000000000000000000000000000000000
0000000aaa0000000000000aaa0000000000000aaa0000000000000aaa0000000000000000000000000000000000000000000000000000000000000000000000
00000054445000000000005444500000000000544450000000000054445000000000000000000000000000000000000000000000000000000000000000000000
00000044444000000000004444400000000000444440000000000044444000000000000000000000000000000000000000000000000000000000000000000000
00000044444000000000004444400000000000444440000000000044444000000000000000000000000000000000000000000000000000000000000000000000
00000044444000000000004444400000000000444440000000000044444000000000000000000000000000000000000000000000000000000000000000000000
000000f444f00000000000f444f00000000000f444f00000000000f444f000000000000000000000000000000000000000000000000000000000000000000000
00000001110000000000000111000000000000011100000000000001110000000000000000000000000000000000000000000000000000000000000000000000
00000001010000000000000101000000000000010100000000000001010000000000000000000000000000000000000000000000000000000000000000000000
00000001010000000000000101000000000000010100000000000001010000000000000000000000000000000000000000000000000000000000000000000000
00000001010000000000000107000000000000010100000000000007010000000000000000000000000000000000000000000000000000000000000000000000
00000007070000000000000700000000000000070700000000000000070000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4041404140414041404140414041404041414141414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5051505150515051505150515051404041414141414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041404140414041404140414041404141414141414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5051505150515051505150515051505141414041414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041404140414041404140414041404141414141414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5051505150515051505150515051505141414141404141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041404140414041404140414041404040414141414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5051505150515051505150515051404041414140414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4041404040414040404040414040404041414141414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4141414141414141414140414141414141414141414141410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
